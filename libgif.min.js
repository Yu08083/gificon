/**
 * Minified by jsDelivr using Terser v5.37.0.
 * Original file: /npm/jsgif@1.0.2/libgif.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.SuperGif=t()}(this,(function(){var e=function(e){return e.reduce((function(e,t){return 2*e+t}),0)},t=function(e){for(var t=[],n=7;n>=0;n--)t.push(!!(e&1<<n));return t},n=function(e){this.data=e,this.len=this.data.length,this.pos=0,this.readByte=function(){if(this.pos>=this.data.length)throw new Error("Attempted to read past end of stream.");return e instanceof Uint8Array?e[this.pos++]:255&e.charCodeAt(this.pos++)},this.readBytes=function(e){for(var t=[],n=0;n<e;n++)t.push(this.readByte());return t},this.read=function(e){for(var t="",n=0;n<e;n++)t+=String.fromCharCode(this.readByte());return t},this.readUnsigned=function(){var e=this.readBytes(2);return(e[1]<<8)+e[0]}},r=function(n,r){r||(r={});var i=function(e){for(var t=[],r=0;r<e;r++)t.push(n.readBytes(3));return t},a=function(){var e,t,r=0;t=new Uint8Array(8192);var i;do{for(e=n.readByte();r+e>t.length;)i=void 0,(i=new Uint8Array(t.length+8192)).set(t),t=i;t.set(n.readBytes(e),r),r+=e}while(0!==e);return t.subarray(0,r)},o=function(o){o.leftPos=n.readUnsigned(),o.topPos=n.readUnsigned(),o.width=n.readUnsigned(),o.height=n.readUnsigned();var l=t(n.readByte());o.lctFlag=l.shift(),o.interlaced=l.shift(),o.sorted=l.shift(),o.reserved=l.splice(0,2),o.lctSize=e(l.splice(0,3)),o.lctFlag&&(o.lct=i(1<<o.lctSize+1)),o.lzwMinCodeSize=n.readByte();var s=a();o.pixels=function(e,t){var n,r,i,a,o,l=0,s=function(e){for(var n=0,r=0;r<e;r++)t[l>>3]&1<<(7&l)&&(n|=1<<r),l++;return n},c=1<<e,u=c+1,d=e+1,h=4096,p=4096,f=new Uint8Array(h),g=new Uint8Array(p),y=[],_=0,w=0,v=function(e,t){for(var n,r,i=y[t].byteLength+1;_+i>g.length;)n=void 0,r=void 0,n=g.length+p,(r=new Uint8Array(n)).set(g),g=r,p<<=1;var a=g.subarray(_,_+i);a.set(y[t]),a[i-1]=y[e][0],_+=i,y.push(a)};for(function(){for(var e=0;e<c;e++)y[e]=new Uint8Array(1),y[e][0]=e;y[c]=new Uint8Array(0),y[u]=null}();;)if(r=n,(n=s(d))!==c){if(n===u)break;if(n<y.length)r!==c&&v(n,r);else{if(n!==y.length)throw new Error("Invalid LZW code.");v(r,r)}for(var m=y[n].length;w+m>f.length;)i=void 0,a=void 0,i=f.length+h,(a=new Uint8Array(i)).set(f),f=a,h<<=1;f.set(y[n],w),w+=m,y.length===1<<d&&d<12&&d++}else o=void 0,o=c+2,y.splice(o,y.length-o),d=e+1,_=0;return f.subarray(0,w)}(o.lzwMinCodeSize,s),o.interlaced&&(o.pixels=function(e,t){for(var n=new Array(e.length),r=e.length/t,i=function(r,i){var a=e.slice(i*t,(i+1)*t);n.splice.apply(n,[r*t,t].concat(a))},a=[0,4,2,1],o=[8,8,4,2],l=0,s=0;s<4;s++)for(var c=a[s];c<r;c+=o[s])i(c,l),l++;return n}(o.pixels,o.width)),r.img&&r.img(o)},l=function(){var i={};switch(i.sentinel=n.readByte(),String.fromCharCode(i.sentinel)){case"!":i.type="ext",function(i){switch(i.label=n.readByte(),i.label){case 249:i.extType="gce",function(i){n.readByte();var a=t(n.readByte());i.reserved=a.splice(0,3),i.disposalMethod=e(a.splice(0,3)),i.userInput=a.shift(),i.transparencyGiven=a.shift(),i.delayTime=n.readUnsigned(),i.transparencyIndex=n.readByte(),i.terminator=n.readByte(),r.gce&&r.gce(i)}(i);break;case 254:i.extType="com",function(e){e.comment=a(),r.com&&r.com(e)}(i);break;case 1:i.extType="pte",function(e){n.readByte(),e.ptHeader=n.readBytes(12),e.ptData=a(),r.pte&&r.pte(e)}(i);break;case 255:i.extType="app",function(e){n.readByte(),e.identifier=n.read(8),e.authCode=n.read(3),"NETSCAPE"===e.identifier?function(e){n.readByte(),e.unknown=n.readByte(),e.iterations=n.readUnsigned(),e.terminator=n.readByte(),r.app&&r.app.NETSCAPE&&r.app.NETSCAPE(e)}(e):function(e){e.appData=a(),r.app&&r.app[e.identifier]&&r.app[e.identifier](e)}(e)}(i);break;default:i.extType="unknown",function(e){e.data=a(),r.unknown&&r.unknown(e)}(i)}}(i);break;case",":i.type="img",o(i);break;case";":i.type="eof",r.eof&&r.eof(i);break;default:throw new Error("Unknown block: 0x"+i.sentinel.toString(16))}"eof"!==i.type&&setTimeout(l,0)};!function(){var a={};if(a.sig=n.read(3),a.ver=n.read(3),"GIF"!==a.sig)throw new Error("Not a GIF file.");a.width=n.readUnsigned(),a.height=n.readUnsigned();var o=t(n.readByte());a.gctFlag=o.shift(),a.colorRes=e(o.splice(0,3)),a.sorted=o.shift(),a.gctSize=e(o.splice(0,3)),a.bgColor=n.readByte(),a.pixelAspectRatio=n.readByte(),a.gctFlag&&(a.gct=i(1<<a.gctSize+1)),r.hdr&&r.hdr(a)}(),setTimeout(l,0)};return function(e){var t,i,a={vp_l:0,vp_t:0,vp_w:null,vp_h:null,c_w:null,c_h:null};for(var o in e)a[o]=e[o];a.vp_w&&a.vp_h&&(a.is_vp=!0);var l=null,s=!1,c=null,u=null,d=null,h=null,p=null,f=null,g=null,y=!0,_=!1,w=[],v=[],m=a.gif;void 0===a.auto_play&&(a.auto_play=!m.getAttribute("rel:auto_play")||"1"==m.getAttribute("rel:auto_play"));var x,b,T,B,A=a.hasOwnProperty("on_end")?a.on_end:null,C=a.hasOwnProperty("on_change")?a.on_change:null,P=a.hasOwnProperty("loop_delay")?a.loop_delay:0,U=a.hasOwnProperty("loop_mode")?a.loop_mode:"auto",k=!a.hasOwnProperty("draw_while_loading")||a.draw_while_loading,S=!!k&&(!a.hasOwnProperty("show_progress_bar")||a.show_progress_bar),E=a.hasOwnProperty("progressbar_height")?a.progressbar_height:25,I=a.hasOwnProperty("progressbar_background_color")?a.progressbar_background_color:"rgba(255,255,255,0.4)",O=a.hasOwnProperty("progressbar_foreground_color")?a.progressbar_foreground_color:"rgba(255,0,22,.8)",R=function(){c=null,u=null,p=d,d=null,f=null},z=function(){try{r(t,L)}catch(e){F("parse")}},N=function(e,t){x.width=e*V(),x.height=t*V(),T.style.minWidth=e*V()+"px",B.width=e,B.height=t,B.style.width=e+"px",B.style.height=t+"px",B.getContext("2d").setTransform(1,0,0,1,0,0)},D=function(e,t,n){if(n&&S){var r,i,o,l=E;if(a.is_vp)_?(i=(a.vp_t+a.vp_h-l)/V(),l/=V(),r=a.vp_l/V()+e/t*(a.vp_w/V()),o=x.width/V()):(i=a.vp_t+a.vp_h-l,r=a.vp_l+e/t*a.vp_w,o=x.width);else i=(x.height-l)/(_?V():1),r=e/t*x.width/(_?V():1),o=x.width/(_?V():1),l/=_?V():1;b.fillStyle=I,b.fillRect(r,i,o-r,l),b.fillStyle=O,b.fillRect(0,i,r,l)}},F=function(e){l=e,i={width:m.width,height:m.height},w=[],b.fillStyle="black",b.fillRect(0,0,a.c_w?a.c_w:i.width,a.c_h?a.c_h:i.height),b.strokeStyle="red",b.lineWidth=3,b.moveTo(0,0),b.lineTo(a.c_w?a.c_w:i.width,a.c_h?a.c_h:i.height),b.moveTo(0,a.c_h?a.c_h:i.height),b.lineTo(a.c_w?a.c_w:i.width,0),b.stroke()},M=function(){f&&(w.push({data:f.getImageData(0,0,i.width,i.height),delay:u}),v.push({x:0,y:0}))},G=function(){var e,t,n,r=-1,i=0,o=function(e){r+=e,c()},s=(e=!1,t=function(){null!==A&&A(m),i++,!1!==U||i<0?n():(e=!1,y=!1)},n=function(){if(e=y){o(1);var i=10*w[r].delay;i||(i=100),0==(r+1+w.length)%w.length?(i+=P,setTimeout(t,i)):setTimeout(n,i)}},function(){e||setTimeout(n,0)}),c=function(){var e;(r=parseInt(r,10))>w.length-1&&(r=0),r<0&&(r=0),e=v[r],B.getContext("2d").putImageData(w[r].data,e.x,e.y),b.globalCompositeOperation="copy",b.drawImage(B,0,0),"function"==typeof C&&C(r)};return{init:function(){l||(a.c_w&&a.c_h||b.scale(V(),V()),a.auto_play?s():(r=0,c()))},step:s,play:function(){y=!0,s()},pause:function(){y=!1},playing:y,move_relative:o,current_frame:function(){return r},length:function(){return w.length},move_to:function(e){r=e,c()}}}(),j=function(e){D(t.pos,t.data.length,e)},W=function(){},H=function(e,t){return function(n){e(n),j(t)}},L={hdr:H((function(e){N((i=e).width,i.height)})),gce:H((function(e){M(),R(),c=e.transparencyGiven?e.transparencyIndex:null,u=e.delayTime,d=e.disposalMethod})),com:H(W),app:{NETSCAPE:H(W)},img:H((function(e){f||(f=B.getContext("2d"));var t=w.length,n=e.lctFlag?e.lct:i.gct;t>0&&(3===p?null!==h?f.putImageData(w[h].data,0,0):f.clearRect(g.leftPos,g.topPos,g.width,g.height):h=t-1,2===p&&f.clearRect(g.leftPos,g.topPos,g.width,g.height));for(var r=f.getImageData(e.leftPos,e.topPos,e.width,e.height),o=0;o<e.pixels.length;o++){var l=e.pixels[o];if(l!==c){var s=n[l],u=4*o;r.data[u]=s[0],r.data[u+1]=s[1],r.data[u+2]=s[2],r.data[u+3]=255}}f.putImageData(r,e.leftPos,e.topPos),_||(b.scale(V(),V()),_=!0),k&&(b.drawImage(B,0,0),k=a.auto_play),g=e}),!0),eof:function(e){M(),j(!1),a.c_w&&a.c_h||(x.width=i.width*V(),x.height=i.height*V()),G.init(),s=!1,Z&&Z(m)}},q=function(){var e=m.parentNode,t=document.createElement("div");x=document.createElement("canvas"),b=x.getContext("2d"),T=document.createElement("div"),B=document.createElement("canvas"),t.width=x.width=m.width,t.height=x.height=m.height,T.style.minWidth=m.width+"px",t.className="jsgif",T.className="jsgif_toolbar",t.appendChild(x),e&&e.insertBefore(t,m),a.c_w&&a.c_h&&N(a.c_w,a.c_h),X=!0},V=function(){return a.max_width&&i&&i.width>a.max_width?a.max_width/i.width:1},X=!1,Z=!1,J=function(e){return!s&&(Z=e||!1,s=!0,w=[],R(),h=null,p=null,f=null,g=null,!0)};return{play:G.play,pause:G.pause,move_relative:G.move_relative,move_to:G.move_to,get_playing:function(){return y},get_canvas:function(){return x},get_canvas_scale:function(){return V()},get_loading:function(){return s},get_auto_play:function(){return a.auto_play},get_length:function(){return G.length()},get_current_frame:function(){return G.current_frame()},get_frame:function(e){return w[e]},load_url:function(e,r){if(J(r)){var i=new XMLHttpRequest;i.open("GET",e,!0),"overrideMimeType"in i?i.overrideMimeType("text/plain; charset=x-user-defined"):"responseType"in i?i.responseType="arraybuffer":i.setRequestHeader("Accept-Charset","x-user-defined"),i.onloadstart=function(){X||q()},i.onload=function(e){200!=this.status&&F("xhr - response"),"response"in this||(this.response=new VBArray(this.responseText).toArray().map(String.fromCharCode).join(""));var r=this.response;r instanceof ArrayBuffer&&(r=new Uint8Array(r)),t=new n(r),setTimeout(z,0)},i.onprogress=function(e){e.lengthComputable&&D(e.loaded,e.total,!0)},i.onerror=function(){F("xhr")},i.send()}},load:function(e){this.load_url(m.getAttribute("rel:animated_src")||m.src,e)},load_raw:function(e,r){J(r)&&(X||q(),t=new n(e),setTimeout(z,0))},set_frame_offset:function(e,t){v[e]?(void 0!==t.x&&(v[e].x=t.x),void 0!==t.y&&(v[e].y=t.y)):v[e]=t}}}}));
//# sourceMappingURL=/sm/a40b94afc5e0e278216de5101351997c6fa663b19318838e39a787c3cdfac6c3.map